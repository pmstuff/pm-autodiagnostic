<!-- Chosen Palette: Indigo (Main), Gray (Background), Chart Accent (#ff9e81) --><!-- Application Structure Plan: Dashboard (Dashboard de 3 Secciones). 
1. Panel Principal (Columna 1/2): Visualización del Gráfico Radar y Sliders (Entrada de Datos del Punto 1) lado a lado para feedback instantáneo.
2. Panel Lateral (Columna 3): Deshabilitado o eliminado.
3. Sección Inferior (Full Width): Contenido del Punto 2 (Reflexiones) organizado en un layout de rejilla (Grid) para acomodar futuras preguntas por parejas. 
Esta estructura prioriza el feedback visual inmediato y organiza el contenido cualitativo (reflexiones) y el checklist (Sección 3) en un formato más ordenado y escalable.
--><!-- Visualization & Content Choices: 
1. Puntuaciones -> Goal: Comparar fortalezas/debilidades -> Viz: Gráfico de Radar (Canvas, dibujo manual) -> Interaction: Sliders de puntuación (input range) que actualizan el gráfico en tiempo real -> Justification: El Radar Chart es el mejor método para visualizar un un perfil de competencias multifactorial de forma sintetizada. 
2. Media Aritmética & Nivel -> Goal: Informar del rendimiento general y dar feedback motivacional -> Viz: Métrica de texto dinámica (HTML) -> Interaction: Actualización automática al mover sliders -> Justification: Proporciona feedback instantáneo y clasifica el estado general del PM.
3. Reflexiones/Checklist -> Goal: Capturar insights cualitativos y evaluar progreso de habilidades -> Viz: Textareas/Checklists (HTML) -> Interaction: Entrada de texto/Persistencia en LocalStorage y filtrado por experiencia -> Justification: Captura datos narrativos esenciales y permite autoevaluación progresiva.
4. Exportar -> Goal: Documentar y compartir -> Viz: Botón (HTML) -> Interaction: Generación de PDF (jsPDF) -> Justification: Convierte el SPA en un informe formal.
CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. --><!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autodiagnóstico PM (Gráfico Radar)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Librería para generar PDF --><script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Definición de colores custom para el botón, basados en el color del gráfico */
        .bg-chart-accent { background-color: #ff9e81; }
        .hover\:bg-chart-dark:hover { background-color: #f78c6e; } /* Tono ligeramente más oscuro para el hover */
        .focus\:ring-chart-accent:focus { --tw-ring-color: #ff9e81; }
        
        /* Estilo para el hover de las cards del checklist */
        .checklist-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <script>
        
        // Ejes del gráfico de radar
        const radarAxes = [
            "Visión de Producto y Ciclo de Vida (1A)",
            "Conocimiento Técnico Aplicado (1B)",
            "Habilidad de Comunicación (2A)",
            "Liderazgo e Influencia (2B/2C)",
            "Estrategia, Datos y Negocio (3B/4)",
            "Mindset y Cultura de Producto (6)" // NUEVO EJE AÑADIDO
        ];

        // --- DATOS DEL CHECKLIST DE HABILIDADES ---
        const CHECKLIST_DATA = {
            "0-6 meses": [
                { id: "0-6_fund_basicos", title: "Fundamentos de Producto - Conceptos Básicos", items: [
                    "Comprender qué es un Product Manager y su rol en la organización", "Entender el ciclo de vida completo de un producto digital", "Conocer la diferencia entre outcomes vs outputs", "Aprender qué es un roadmap de producto y cómo se construye", "Dominar la priorización de un Product Backlog", "Familiarizarse con metodologías ágiles (Scrum, Kanban)"
                ], badge: "0-6 meses" },
                { id: "0-6_fund_disc", title: "Fundamentos de Producto - Discovery y Validación", items: [
                    "Aprender a validar hipótesis en el mercado antes de implementar", "Realizar entrevistas con usuarios efectivas", "Entender qué es un MVP y cómo definirlo", "Conocer técnicas básicas de user research", "Aprender a identificar pain points y oportunidades de mercado", "Practicar la creación de user personas"
                ], badge: "0-6 meses" }
            ],
            "6-12 meses": [
                { id: "6-12_estr_vis", title: "Estrategia y Planificación - Visión de Producto", items: [
                    "Desarrollar y comunicar una visión de producto clara", "Alinear la estrategia de producto con objetivos de negocio", "Aprender a hacer análisis de competencia efectivos", "Identificar oportunidades de mercado y propuesta de valor", "Definir y comunicar el posicionamiento del producto"
                ], badge: "6-12 meses" },
                { id: "6-12_estr_frame", title: "Estrategia y Planificación - Frameworks y Priorización", items: [
                    "Dominar frameworks de priorización (RICE, MoSCoW, Kano)", "Aprender a definir y trabajar con OKRs", "Entender el modelo de Jobs-to-be-Done", "Practicar técnicas de priorización con stakeholders", "Desarrollar criterios de decisión basados en impacto vs esfuerzo"
                ], badge: "6-12 meses" },
                { id: "6-12_metricas", title: "Métricas y Análisis - Product Analytics", items: [
                    "Definir KPIs relevantes para medir éxito del producto", "Aprender herramientas de analítica (Google Analytics, Mixpanel, Amplitude)", "Interpretar datos de usuario y comportamiento", "Realizar experimentos y A/B testing", "Calcular y entender métricas clave (retención, conversión, CAC, LTV)", "Tomar decisiones data-driven"
                ], badge: "6-12 meses" }
            ],
            "12-18 meses": [
                { id: "12-18_ejec_des", title: "Ejecución y Delivery - Gestión del Desarrollo", items: [
                    "Colaborar efectivamente con equipos de ingeniería", "Escribir user stories claras y completas", "Participar activamente en ceremonias ágiles", "Gestionar el backlog de forma efectiva", "Entender deuda técnica y su impacto", "Negociar scope y tiempos de entrega"
                ], badge: "12-18 meses" },
                { id: "12-18_ejec_gtm", title: "Ejecución y Delivery - Lanzamiento y Go-to-Market", items: [
                    "Planificar y ejecutar lanzamientos de producto", "Coordinar equipos multifuncionales para lanzamientos", "Desarrollar estrategias de go-to-market básicas", "Crear materiales de comunicación de producto", "Medir y reportar el éxito de lanzamientos"
                ], badge: "12-18 meses" }
            ],
            "18-36 meses": [
                { id: "18-36_soft_com", title: "Soft Skills y Liderazgo - Comunicación", items: [
                    "Comunicar ideas a audiencias técnicas y no técnicas", "Desarrollar storytelling efectivo de producto", "Presentar a stakeholders y líderes senior", "Escuchar activamente y practicar empatía", "Adaptar el mensaje según el público objetivo", "Facilitar workshops y sesiones colaborativas"
                ], badge: "18-36 meses" },
                { id: "18-36_soft_infl", title: "Soft Skills y Liderazgo - Influencia y Negociación", items: [
                    "Liderar sin autoridad directa", "Negociar prioridades con stakeholders diversos", "Gestionar conflictos de intereses en el equipo", "Defender decisiones de producto con datos", "Construir consenso en situaciones de desacuerdo", "Vender una visión de producto internamente"
                ], badge: "18-36 meses" },
                { id: "18-36_soft_time", title: "Soft Skills y Liderazgo - Gestión del Tiempo", items: [
                    "Priorizar tareas propias efectivamente", "Manejar múltiples proyectos simultáneamente", "Delegar tareas apropiadamente", "Automatizar procesos repetitivos", "Eliminar actividades que no generan valor", "Establecer sistemas de trabajo eficientes"
                ], badge: "18-36 meses" },
                { id: "18-36_crec_estr", title: "Crecimiento Avanzado - Pensamiento Estratégico", items: [
                    "Desarrollar visión a largo plazo del producto", "Evaluar impacto de decisiones a nivel organizacional", "Entender interconexión entre productos y equipos", "Pensar en términos de portfolio de productos", "Anticipar tendencias de mercado y tecnología", "Contribuir a la estrategia corporativa"
                ], badge: "18-36 meses" },
                { id: "18-36_crec_ment", title: "Crecimiento Avanzado - Mentoring y Liderazgo", items: [
                    "Mentorar a PMs más junior", "Establecer y comunicar principios de producto", "Influir en la cultura de producto de la organización", "Desarrollar otros líderes de producto", "Escalar procesos y metodologías", "Ser referente en temas específicos de producto"
                ], badge: "18-36 meses" },
                { id: "18-36_crec_esp", title: "Crecimiento Avanzado - Especialización", items: [
                    "Profundizar en áreas técnicas (APIs, arquitectura, IA)", "Especializarse en industrias o verticales", "Dominar técnicas avanzadas de growth o monetización", "Convertirse en experto en plataformas o ecosistemas", "Desarrollar expertise en producto B2B, B2C o marketplace", "Mantenerse actualizado en tendencias y herramientas emergentes"
                ], badge: "18-36 meses" },
                { id: "18-36_mindset", title: "Mindset y Cultura de Producto - Principios Fundamentales", items: [
                    "Adoptar mentalidad de outcomes sobre outputs", "Ser customer-obsessed en todas las decisiones", "Practicar aprendizaje continuo y experimentación", "Desarrollar tolerancia a la ambigüedad", "Mantener balance entre visión y pragmatismo", "Fomentar colaboración sobre jerarquía"
                ], badge: "18-36 meses" }
            ],
            "Más de 36 meses": [] // No se requiere contenido adicional, solo acumulación
        };

        const EXPERIENCE_MAP = {
            "0-6 meses": ["0-6 meses"],
            "6-12 meses": ["0-6 meses", "6-12 meses"],
            "12-18 meses": ["0-6 meses", "6-12 meses", "12-18 meses"],
            "18-36 meses": ["0-6 meses", "6-12 meses", "12-18 meses", "18-36 meses"],
            "Más de 36 meses": ["0-6 meses", "6-12 meses", "12-18 meses", "18-36 meses"]
        };


        // --- ESTADO Y PERSISTENCIA DEL CHECKLIST ---
        
        let checklistState = JSON.parse(localStorage.getItem('pmChecklistState')) || {};

        function saveChecklistState(groupId, itemId, isChecked) {
            if (!checklistState[groupId]) {
                checklistState[groupId] = {};
            }
            checklistState[groupId][itemId] = isChecked;
            localStorage.setItem('pmChecklistState', JSON.stringify(checklistState));
            updateProgress(groupId);
        }

        function isItemChecked(groupId, itemId) {
            return checklistState[groupId] && checklistState[groupId][itemId];
        }

        function updateProgress(groupId) {
            const card = document.getElementById(groupId);
            if (!card) return;

            const period = card.getAttribute('data-period');
            const groupData = CHECKLIST_DATA[period].find(g => g.id === groupId);
            if (!groupData) return;

            const total = groupData.items.length;
            const completed = groupData.items.filter((_, index) => isItemChecked(groupId, index)).length;
            const percentage = (completed / total) * 100;

            const progressText = card.querySelector('.progress-text');
            const progressBar = card.querySelector('.progress-bar');
            
            if (progressText) progressText.textContent = `${completed}/${total} completados`;
            if (progressBar) progressBar.style.width = `${percentage}%`;
        }

        // --- MANEJO DE LA EXPERIENCIA Y RENDERIZADO DEL CHECKLIST ---

        function handleExperienceChange(selectedValue) {
            const container = document.getElementById('checklist-container');
            if (!container) return;

            // Mostrar el container antes de rellenarlo
            container.classList.remove('opacity-0', 'scale-95');
            container.classList.add('opacity-100', 'scale-100');

            container.innerHTML = ''; // Limpiar contenido anterior
            
            const periodsToShow = EXPERIENCE_MAP[selectedValue] || [];
            
            periodsToShow.forEach(period => {
                const groups = CHECKLIST_DATA[period] || [];
                
                groups.forEach(group => {
                    // Renderizar Card
                    let itemsHtml = group.items.map((item, index) => {
                        const itemId = `${group.id}_${index}`;
                        const checked = isItemChecked(group.id, index);
                        return `
                            <div class="flex items-start mb-2">
                                <input id="${itemId}" type="checkbox" ${checked ? 'checked' : ''} 
                                       class="mt-1 w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500" 
                                       onclick="saveChecklistState('${group.id}', ${index}, this.checked)">
                                <label for="${itemId}" class="ml-3 text-sm font-medium text-gray-700 select-none cursor-pointer">
                                    ${item}
                                </label>
                            </div>
                        `;
                    }).join('');

                    // Clase para el badge
                    let badgeColor = 'bg-indigo-100 text-indigo-800';
                    if (period === "0-6 meses") badgeColor = 'bg-green-100 text-green-800';
                    else if (period === "6-12 meses") badgeColor = 'bg-yellow-100 text-yellow-800';
                    else if (period === "12-18 meses") badgeColor = 'bg-blue-100 text-blue-800';
                    else if (period === "18-36 meses") badgeColor = 'bg-red-100 text-red-800';


                    container.innerHTML += `
                        <div id="${group.id}" data-period="${period}" class="checklist-card bg-gray-50 p-6 rounded-xl shadow-lg border border-gray-200 transition duration-300">
                            <div class="flex justify-between items-start mb-4">
                                <h4 class="text-lg font-bold text-gray-800">${group.title}</h4>
                                <span class="px-3 py-1 text-xs font-semibold rounded-full ${badgeColor}">${group.badge}</span>
                            </div>
                            
                            <!-- Checkboxes -->
                            <div class="space-y-2 mb-4">
                                ${itemsHtml}
                            </div>

                            <!-- Barra de progreso -->
                            <div class="pt-4 border-t border-gray-200">
                                <div class="flex justify-between items-center text-sm font-semibold">
                                    <p class="progress-text text-gray-700"></p>
                                    <p class="text-indigo-600">${period}</p>
                                </div>
                                <div class="mt-2 w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar h-2 rounded-full bg-indigo-500 transition-all duration-500 ease-out" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            });

            // Actualizar el progreso inicial de todas las cards después de que se hayan renderizado
            periodsToShow.forEach(period => {
                const groups = CHECKLIST_DATA[period] || [];
                groups.forEach(group => updateProgress(group.id));
            });
        }


        // --- ESTADO INICIAL DE LA APLICACIÓN Y LLAMADAS GLOBALES ---

        const initialState = {
            userName: "", 
            scores: radarAxes.reduce((acc, axis) => ({ ...acc, [axis]: 3 }), {}),
            reflections: {
                impacto: "",
                admiracion: "",
                lanzamiento: "",
                stakeholders: "",
                creatividad: "",
                gestionEquipo: ""
            },
        };

        let assessmentData = { ...initialState };

        window.onload = function() {
            // Inicialización de la aplicación sin Firebase para uso estático/online.
            
            const userIdDisplay = document.getElementById('user-id-display');
            if (userIdDisplay) userIdDisplay.classList.add('hidden');
            
            const saveStatus = document.getElementById('save-status');
            if (saveStatus) saveStatus.classList.add('hidden');
            
            renderUI();
            updateButtonState();
            
            // Inicializar el checklist al cargar (muestra el primer grupo o ninguno)
            handleExperienceChange(document.getElementById('experience-selector').value);
        };

        // El resto de funciones de cálculo, validación y exportación (drawRadarChart, exportPDF, etc.) se mantienen sin cambios mayores, solo la función renderUI que ahora llama a la lógica del checklist.

        // --- CALCULATION LOGIC ---

        function calculateAverageScore() {
            const scores = Object.values(assessmentData.scores);
            if (scores.length === 0) return '0.00';
            const sum = scores.reduce((acc, score) => acc + score, 0);
            return (sum / scores.length).toFixed(2);
        }
        
        function getScaleMessage(average) {
            const avg = parseFloat(average);
            let message = "";
            
            // Si la media es exactamente 3.00, es el estado inicial. Muestra mensaje neutral.
            if (avg === 3.00) {
                return "Haz el test y mira dónde te encuentras como PM";
            }
            
            if (avg >= 0 && avg <= 1.5) {
                message = "Ánimo, estás empezando tu camino";
            } else if (avg >= 1.6 && avg <= 2.99) {
                message = "Lo estás haciendo muy bien, ya queda poco";
            } else if (avg >= 3.01 && avg <= 4.5) { // Usar 3.01 para evitar el conflicto con el estado inicial 3.00
                message = "Ya lo tienes, ahora solo queda pulir los aspectos menos notables";
            } else if (avg >= 4.6 && avg <= 5) {
                message = "Estás listo para cualquier desafío como PM, pero no te relajes";
            }
            return `¡${message}!`; // Añadir exclamaciones si es un resultado real
        }

        // --- FORM VALIDATION AND BUTTON STATE ---

        function checkFormCompletion() {
            // Check if all reflection fields are non-empty (6 campos)
            const reflections = assessmentData.reflections;
            return (
                reflections.impacto && reflections.impacto.trim().length > 0 &&
                reflections.admiracion && reflections.admiracion.trim().length > 0 &&
                reflections.lanzamiento && reflections.lanzamiento.trim().length > 0 &&
                reflections.stakeholders && reflections.stakeholders.trim().length > 0 &&
                reflections.creatividad && reflections.creatividad.trim().length > 0 &&
                reflections.gestionEquipo && reflections.gestionEquipo.trim().length > 0
            );
        }
        
        function updateButtonState() {
            const isComplete = checkFormCompletion();
            const exportBtn = document.getElementById('export-pdf-btn');
            const exportHint = document.getElementById('export-hint'); // Obtener el hint
            
            if (exportBtn) {
                exportBtn.disabled = !isComplete;
                
                // Clases comunes para el botón
                exportBtn.classList.add('text-white', 'font-bold', 'py-3', 'px-6', 'rounded-lg', 'shadow-md', 'transition', 'duration-300', 'transform', 'hover:scale-[1.02]', 'focus:outline-none', 'focus:ring-4', 'focus:ring-opacity-50');

                if (isComplete) {
                    // Estado Habilitado: Color del gráfico (#ff9e81)
                    exportBtn.classList.remove('bg-gray-400', 'hover:bg-gray-400');
                    exportBtn.classList.add('bg-chart-accent', 'hover:bg-chart-dark', 'focus:ring-chart-accent');
                    if (exportHint) exportHint.style.display = 'none';
                } else {
                    // Estado Deshabilitado: Color gris
                    exportBtn.classList.add('bg-gray-400');
                    exportBtn.classList.remove('bg-chart-accent', 'hover:bg-chart-dark', 'focus:ring-chart-accent');
                    if (exportHint) exportHint.style.display = 'block'; // Mostrar hint
                }
            }
        }
        
        function showSnackbar(message) {
            const snackbar = document.getElementById('snackbar');
            if (snackbar) {
                snackbar.textContent = message;
                snackbar.classList.remove('opacity-0', 'invisible');
                snackbar.classList.add('opacity-100', 'visible');
                setTimeout(() => {
                    snackbar.classList.remove('opacity-100', 'visible');
                    snackbar.classList.add('opacity-0', 'invisible');
                }, 3000);
            }
        }

        // --- UI RENDERING AND INPUT HANDLING (Cont.) ---
        
        function handleNameChange(value) {
            assessmentData.userName = value;
            // No saving to DB, just updating UI/state
        }

        function handleScoreChange(axis, value) {
            assessmentData.scores[axis] = parseInt(value, 10);
            renderUI(); // Redraw chart
        }

        function handleReflectionChange(key, value) {
            assessmentData.reflections[key] = value;
            updateButtonState(); // Update button state after reflection change
        }

        // Exponer funciones globalmente para su uso en controladores de eventos HTML en línea
        window.handleNameChange = handleNameChange;
        window.handleScoreChange = handleScoreChange;
        window.handleReflectionChange = handleReflectionChange;
        window.handleExperienceChange = handleExperienceChange; // Nueva función global
        window.saveChecklistState = saveChecklistState; // Nueva función global
        window.exportPDF = exportPDF;


        function renderUI() {
            const scoresContainer = document.getElementById('scores-container');
            const reflectionsContainer = document.getElementById('reflections-container');
            
            // CRÍTICO: El error puede ocurrir aquí si los contenedores aún no están cargados.
            if (!scoresContainer || !reflectionsContainer) return;
            
            scoresContainer.innerHTML = '';
            reflectionsContainer.innerHTML = '';
            
            // Set Name input value
            const nameInput = document.getElementById('name-input');
            if (nameInput) { // Agregada verificación de nulidad
                nameInput.value = assessmentData.userName;
            }
            
            // 1. Render Score Sliders (Punto 1)
            radarAxes.forEach(axis => {
                const currentValue = assessmentData.scores[axis];
                const cleanAxisName = axis.split('(')[0].trim();
                
                scoresContainer.innerHTML += `
                    <div class="mb-6 p-4 bg-white rounded-lg shadow-md border border-gray-100">
                        <label for="${axis}" class="block text-lg font-semibold text-indigo-700 mb-2">${cleanAxisName}</label>
                        <div class="flex items-center">
                            <input type="range" min="1" max="5" value="${currentValue}" id="${axis}" class="w-full h-2 bg-indigo-100 rounded-lg appearance-none cursor-pointer range-lg mr-4" oninput="document.getElementById('score-value-${axis.replace(/\s/g, '_')}').textContent = this.value; handleScoreChange('${axis}', this.value);">
                            <span id="score-value-${axis.replace(/\s/g, '_')}" class="text-xl font-bold text-indigo-700 w-8 text-center">${currentValue}</span>
                        </div>
                        <p class="text-sm text-gray-500 mt-2">Puntuación: ${currentValue}. (1: Sin experiencia, 5: Experto)</p>
                    </div>
                `;
            });
            
            // 2. Render Reflection Text Areas (Punto 2)
            const reflections = [
                { key: 'impacto', title: 'Impacto y Métricas:', question: 'Describe una vez que propusiste una mejora técnica: ¿Cómo la defendiste? ¿Qué métricas usaste para medir su éxito?' },
                { key: 'admiracion', title: 'Producto Digital Admirado:', question: '¿Qué producto digital admiras y por qué? ¿Qué *pain points* resuelve y cómo lo mejorarías?' },
                { key: 'lanzamiento', title: 'Proceso de Lanzamiento:', question: 'Si tuvieras que lanzar una nueva funcionalidad desde cero, ¿qué pasos seguirías desde *discovery* hasta producción?' },
                { key: 'stakeholders', title: 'Gestión de stakeholders:', question: '¿Cual ha sido tu mayor desafio, proyecto o problema a la hora de alinear tratando con stakeholders y sus espectativas u objetivos esperados?' },
                { key: 'creatividad', title: 'Diseño y Creatividad:', question: 'Si tuvieras que diseñar una funcionalidad para reducir la fricción en el *checkout* de Amazon, ¿qué harías (solución)? ¿Cómo validarías la hipótesis y qué métrica principal usarías para medir el éxito?' },
                { key: 'gestionEquipo', title: 'Liderazgo de Equipo:', question: 'Describe un conflicto entre Ingeniería y Diseño que hayas tenido que mediar. ¿Cómo alineaste a los equipos para priorizar el objetivo del producto por encima de sus propias metas?' }
            ];

            reflections.forEach(item => {
                const currentValue = assessmentData.reflections[item.key] || '';
                reflectionsContainer.innerHTML += `
                    <div class="p-4 bg-white rounded-xl shadow-md border border-gray-100">
                        <label for="${item.key}-reflection" class="block text-lg font-semibold text-indigo-700 mb-2">${item.title}</label>
                        <p class="text-sm text-gray-500 mb-2">${item.question}</p>
                        <textarea id="${item.key}-reflection" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" onchange="handleReflectionChange('${item.key}', this.value);" oninput="handleReflectionChange('${item.key}', this.value);">${currentValue}</textarea>
                    </div>
                `;
            });
            
            // Draw the chart after rendering inputs
            drawRadarChart(assessmentData.scores);
            updateButtonState();
        }

        // --- RADAR CHART DRAWING LOGIC ---

        function drawRadarChart(scores) {
            const canvas = document.getElementById('radar-chart');
            if (!canvas || !canvas.getContext) return;

            const ctx = canvas.getContext('2d');
            
            // Define un margen fijo para evitar que las etiquetas se corten
            const margin = 30; // Margen de seguridad para etiquetas
            const availableSize = Math.min(canvas.offsetWidth, window.innerWidth * 0.9, 450);
            
            canvas.width = availableSize;
            canvas.height = availableSize;

            // El tamaño de dibujo efectivo se reduce por el margen
            const effectiveSize = availableSize - 2 * margin;
            const center = availableSize / 2;
            const radius = effectiveSize / 2.5; // Radio ajustado basado en el tamaño efectivo

            const numAxes = radarAxes.length; // AHORA ES 6
            const angleStep = (2 * Math.PI) / numAxes;
            const maxScore = 5;
            const pointRadius = 5; 
            const textLineHeight = 12; // Altura de línea para fuente de 10px (AJUSTE)

            ctx.clearRect(0, 0, availableSize, availableSize);

            // Función para obtener coordenadas (usa el center y radius ajustados)
            const getCoord = (angle, score) => {
                const r = (score / maxScore) * radius;
                return {
                    x: center + r * Math.cos(angle - Math.PI / 2),
                    y: center + r * Math.sin(angle - Math.PI / 2)
                };
            };
            
            // --- 1. Draw Background Grid (Circles/Hexagons) ---
            
            for (let s = 1; s <= maxScore; s++) {
                ctx.beginPath();
                ctx.strokeStyle = s % 2 === 0 ? '#ddd' : '#ccc';
                ctx.lineWidth = 1;
                
                for (let i = 0; i < numAxes; i++) {
                    const angle = i * angleStep;
                    const coord = getCoord(angle, s);
                    if (i === 0) {
                        ctx.moveTo(coord.x, coord.y);
                    } else {
                        ctx.lineTo(coord.x, coord.y);
                    }
                }
                ctx.closePath();
                ctx.stroke();
            }

            // --- 2. Draw Axes and Labels ---
            
            ctx.fillStyle = '#4B5563';
            ctx.font = '10px Inter, sans-serif'; 
            ctx.textBaseline = 'middle';

            for (let i = 0; i < numAxes; i++) {
                const angle = i * angleStep;
                const endCoord = getCoord(angle, maxScore);

                // Dibujar línea del eje
                ctx.beginPath();
                ctx.strokeStyle = '#9CA3AF';
                ctx.lineWidth = 1;
                ctx.moveTo(center, center);
                ctx.lineTo(endCoord.x, endCoord.y);
                ctx.stroke();

                // POSICIONAMIENTO SEGURO DEL TEXTO: 
                const safeLabelRadius = radius * 1.09; 
                let labelCoord = getCoord(angle, maxScore * 1.09); 
                
                // Alineación del texto
                let alignment = 'center';
                let textX = labelCoord.x;
                
                // Ajustes de alineación más precisos para 6 ejes
                const normalizedAngle = angle % (2 * Math.PI);
                if (normalizedAngle < Math.PI / 6 || normalizedAngle >= 11 * Math.PI / 6) { alignment = 'center'; } // Top center (0)
                else if (normalizedAngle > 0 && normalizedAngle <= 5 * Math.PI / 6) { alignment = 'left'; } // Right side (1, 2)
                else if (normalizedAngle > 5 * Math.PI / 6 && normalizedAngle <= 7 * Math.PI / 6) { alignment = 'center'; } // Bottom center (3)
                else { alignment = 'right'; } // Left side (4, 5)

                // Ajustar posición X para compensar el ancho del texto
                if (alignment === 'left') {
                    textX += 5; // Mover 5px a la derecha del punto
                } else if (alignment === 'right') {
                    textX -= 5; // Mover 5px a la izquierda del punto
                }
                
                ctx.textAlign = alignment;
                
                // Lógica de salto de línea (Con los saltos forzados)
                let label = radarAxes[i].split('(')[0].trim();
                let lines = [];

                if (i === 0) { // Visión de Producto y Ciclo de Vida
                    const specificLabelRadius = radius * 1.15; // Ajuste para el punto 0
                    labelCoord = getCoord(angle, maxScore * 1.15);
                    textX = labelCoord.x;
                    lines = ["Visión de Producto", "y Ciclo de Vida"];
                } else if (i === 1) { // Conocimiento Técnico Aplicado
                    lines = ["Conocimiento", "Técnico", "Aplicado"];
                } else if (i === 2) { // Habilidad de comunicación
                    lines = ["Habilidad", "de", "comunicación"];
                } else if (i === 3) { // Liderazgo e influencia
                    lines = ["Liderazgo", "e influencia"];
                } else if (i === 4) { // Estrategia, Datos y Negocio
                    lines = ["Estrategia,", "Datos y", "Negocio"];
                } else if (i === 5) { // Mindset y Cultura de Producto
                    lines = ["Mindset y", "Cultura de", "Producto"];
                } else {
                    lines.push(label); // Fallback
                }
                
                // Coordenada Y de inicio
                const yOffset = (lines.length - 1) / 2 * textLineHeight;

                lines.forEach((line, lineIndex) => {
                    ctx.fillText(line, textX, labelCoord.y + (lineIndex * textLineHeight) - yOffset);
                });
            }

            // --- 3. Draw Data Polygon (The Assessment Result) ---
            
            const redColor = '#ff9e81';
            const rgbaFill = 'rgba(255, 158, 129, 0.4)';

            ctx.beginPath();
            ctx.fillStyle = rgbaFill;
            ctx.strokeStyle = redColor;
            ctx.lineWidth = 2;

            radarAxes.forEach((axis, i) => {
                const score = scores[axis] || 0;
                const angle = i * angleStep;
                const coord = getCoord(angle, score);

                if (i === 0) {
                    ctx.moveTo(coord.x, coord.y);
                } else {
                    ctx.lineTo(coord.x, coord.y);
                }
                
                // Dibujar punto
                ctx.beginPath();
                ctx.arc(coord.x, coord.y, pointRadius, 0, 2 * Math.PI);
                ctx.fillStyle = redColor;
                ctx.fill();
            });

            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // --- 4. Draw Specific Connection Lines (Hexágono) ---

            // Conexiones secuenciales: [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 0]
            const connections = [
                [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 0]
            ];

            ctx.strokeStyle = redColor;
            ctx.lineWidth = 3; 

            connections.forEach(([indexA, indexB]) => {
                const scoreA = scores[radarAxes[indexA]];
                const scoreB = scores[radarAxes[indexB]];

                if (scoreA !== undefined && scoreB !== undefined) {
                    const angleA = indexA * angleStep;
                    const angleB = indexB * angleStep;
                    
                    const coordA = getCoord(angleA, scoreA);
                    const coordB = getCoord(angleB, scoreB);
                    
                    ctx.beginPath();
                    ctx.moveTo(coordA.x, coordA.y);
                    ctx.lineTo(coordB.x, coordB.y);
                    ctx.stroke();
                }
            });


            // Render Average Score and Scale Message
            const average = calculateAverageScore();
            const message = getScaleMessage(average);
            
            const averageDisplay = document.getElementById('average-display');
            
            if (!averageDisplay) return;

            const mediaFontSize = '1.125rem'; 
            const scaleFontSize = '0.875rem'; 
            
            averageDisplay.innerHTML = `
                <div class="flex flex-col items-center lg:items-end space-y-1">
                    <p class="font-bold text-gray-800" style="font-size: ${mediaFontSize};">
                        Media de tus respuestas: <span class="text-indigo-700">${average}</span>
                    </p>
                    <p class="text-indigo-700 font-normal" style="font-size: ${scaleFontSize};">
                        ${message}
                    </p>
                </div>
            `;
        }

        // --- PDF EXPORT LOGIC ---
        function exportPDF() {
            if (!checkFormCompletion()) {
                showSnackbar("Completa las respuestas para poder exportarlo");
                return;
            }

            // Carga la función jsPDF
            const { jsPDF } = window.jspdf;
            if (!jsPDF) {
                console.error('Error: La librería jsPDF no cargó correctamente.');
                return;
            }
            
            // Inicializa jsPDF (orientación retrato, unidades mm, tamaño A4)
            const doc = new jsPDF('p', 'mm', 'a4');
            const pageCenter = 105; // Centro de la página A4 (210mm / 2)
            const margin = 15;
            const contentWidth = (210 - margin * 2); // 180mm
            let y = 15; // Posición Y inicial
            
            const name = assessmentData.userName || '— Sin nombre —';
            const userId = 'PORTABLE_SESSION'; // Usar un ID genérico para la descarga sin Firebase

            // --- Definición de Colores para el PDF (RGB) ---
            const colorAccentRed = [255, 158, 129]; // #ff9e81 (para periodos incompletos)
            const colorSuccessGreen = [34, 139, 34]; // Verde para éxito
            const colorDefaultGray = [0, 0, 0]; // Negro para texto normal

            // ------------------------------------
            // 1. Encabezado General (Título y Nombre)
            // ------------------------------------
            doc.setFontSize(22);
            doc.setFont("helvetica", "bold");
            doc.text("Autodiagnóstico Product Manager (Mes 1)", pageCenter, y, { align: 'center' });
            y += 8;
            
            // Nombre de la persona (centrado)
            doc.setFontSize(14);
            doc.setFont("helvetica", "normal");
            doc.text(`Nombre: ${name}`, pageCenter, y, { align: 'center' });
            y += 8; // Salto de línea después del nombre
            
            // ------------------------------------
            // 1. Gráfico (Canvas como Imagen) - PRIMERA PÁGINA
            // ------------------------------------
            doc.setFontSize(16);
            doc.setTextColor(colorDefaultGray[0], colorDefaultGray[1], colorDefaultGray[2]);
            doc.text("Punto 1: Gráfico de Competencias", margin, y);
            y += 5;

            const canvas = document.getElementById('radar-chart');
            const imgData = canvas.toDataURL('image/png');
            
            // Dimensiones para que quepa bien en A4 (180mm de ancho con 15mm de margen)
            const imgWidth = contentWidth;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;

            doc.addImage(imgData, 'PNG', margin, y, imgWidth, imgHeight);
            y += imgHeight + 10;

            // ------------------------------------
            // 2. Media Aritmética y Escala de Nivel - (Aún en la primera página, debajo del gráfico)
            // ------------------------------------
            const average = calculateAverageScore();
            const scaleMessage = getScaleMessage(average);
            
            // Media (Negrita)
            doc.setFontSize(14);
            doc.setFont("helvetica", "bold");
            doc.setTextColor(colorDefaultGray[0], colorDefaultGray[1], colorDefaultGray[2]);
            doc.text(`Media de tus respuestas: ${average}`, (210 - margin), y, null, null, 'right');
            y += 5;

            // Mensaje de Escala (Normal, Fuente más pequeña)
            doc.setFontSize(12); // Dos puntos menos que 14
            doc.setFont("helvetica", "normal");
            // Se asume que el mensaje es corto y se puede alinear a la derecha debajo de la media
            doc.text(scaleMessage, (210 - margin), y, null, null, 'right');
            y += 10; // Espacio después de la escala
            
            // ------------------------------------
            // 3. Reflexiones (Punto 2) - SEGUNDA PÁGINA
            // ------------------------------------
            
            doc.addPage(); // Salto de página
            y = 15; // Resetear Y para la nueva página
            
            doc.setFontSize(18);
            doc.setFont("helvetica", "bold");
            doc.text("2. Reflexión sobre Casos Prácticos", pageCenter, y, { align: 'center' });
            y += 10;
            
            const reflections = [
                { key: 'impacto', title: 'Impacto y Métricas:', question: 'Describe una vez que propusiste una mejora técnica: ¿Cómo la defendiste? ¿Qué métricas usaste para medir su éxito?' },
                { key: 'admiracion', title: 'Producto Digital Admirado:', question: '¿Qué producto digital admiras y por qué? ¿Qué *pain points* resuelve y cómo lo mejorarías?' },
                { key: 'lanzamiento', title: 'Proceso de Lanzamiento:', question: 'Si tuvieras que lanzar una nueva funcionalidad desde cero, ¿qué pasos seguirías desde *discovery* hasta producción?' },
                { key: 'stakeholders', title: 'Gestión de stakeholders:', question: '¿Cual ha sido tu mayor desafio, proyecto o problema a la hora de alinear tratando con stakeholders y sus espectativas u objetivos esperados?' },
                { key: 'creatividad', title: 'Diseño y Creatividad:', question: 'Si tuvieras que diseñar una funcionalidad para reducir la fricción en el *checkout* de Amazon, ¿qué harías (solución)? ¿Cómo validarías la hipótesis y qué métrica principal usarías para medir el éxito?' },
                { key: 'gestionEquipo', title: 'Liderazgo de Equipo:', question: 'Describe un conflicto entre Ingeniería y Diseño que hayas tenido que mediar. ¿Cómo alineaste a los equipos para priorizar el objetivo del producto por encima de sus propias metas?' }
            ];

            doc.setFontSize(12);
            doc.setTextColor(colorDefaultGray[0], colorDefaultGray[1], colorDefaultGray[2]);

            reflections.forEach((item, i) => {
                const answer = assessmentData.reflections[item.key] || '— Sin respuesta —';
                
                // Si necesitamos una nueva página antes de la pregunta
                if (y > 270) { 
                    doc.addPage();
                    y = 15;
                }

                // Título de la pregunta (Negrita)
                doc.setFont("helvetica", "bold");
                doc.text(item.title, margin, y);
                y += 5; // Espacio después del título
                
                // Texto de la pregunta (Itálica)
                doc.setFont("helvetica", "italic");
                // Asegurar que el texto de la pregunta no se salga del formato de la página
                const splitQuestion = doc.splitTextToSize(item.question, contentWidth);
                doc.text(splitQuestion, margin, y);
                y += (splitQuestion.length * 5) + 2; // 5mm por línea + 2mm de padding
                
                // Respuesta (Normal, Multilínea)
                doc.setFont("helvetica", "normal");
                // Salto de línea entre pregunta y respuesta
                y += 5; 
                
                // Dividir texto de la respuesta para ajustar al ancho del documento (180mm)
                const splitAnswer = doc.splitTextToSize(answer, contentWidth);
                doc.text(splitAnswer, margin, y);
                y += (splitAnswer.length * 5) + 5; // 5mm por línea + 5mm de padding

                // Línea divisoria horizontal si no es el último elemento
                if (i < reflections.length - 1) {
                    doc.setDrawColor(200, 200, 200); // Color gris claro
                    doc.line(margin, y, (210 - margin), y); // Línea de margen a margen
                    y += 7; // Espacio después de la línea
                }
            });
            
            // ------------------------------------
            // 4. Checklist de Habilidades (Punto 3) - TERCERA PÁGINA (o Continuación)
            // ------------------------------------
            
            // Comprobar si hay espacio o añadir nueva página
            if (y > 250) { 
                doc.addPage(); 
                y = 15; 
            } else {
                y += 10;
            }
            
            doc.setFontSize(18);
            doc.setFont("helvetica", "bold");
            doc.text("3. Checklist habilidades vs experiencia", pageCenter, y, { align: 'center' });
            y += 10;
            
            doc.setFontSize(12);
            
            const periods = Object.keys(CHECKLIST_DATA);
            let hasContent = false;
            
            // Recorrer todos los periodos y grupos
            periods.forEach(period => {
                const groups = CHECKLIST_DATA[period] || [];
                
                groups.forEach(group => {
                    const groupId = group.id;
                    const totalItems = group.items.length;
                    
                    // Calcular ítems completados leyendo el localStorage
                    const completedItems = group.items.filter((_, index) => isItemChecked(groupId, index)).length;

                    // Filtrar: Solo incluir si X > 0
                    if (completedItems > 0) {
                        hasContent = true;
                        
                        // Determinar colores
                        const isCompleted = completedItems === totalItems;
                        const currentColor = isCompleted ? colorSuccessGreen : colorDefaultGray;
                        const periodColor = isCompleted ? colorSuccessGreen : colorAccentRed;
                        
                        // Si necesitamos una nueva página
                        if (y > 270) { 
                            doc.addPage(); 
                            y = 15; 
                        }
                        
                        // Título de la Card (Con viñeta y color condicional)
                        doc.setFontSize(14); // Un poco más grande para el título de la card
                        doc.setFont("helvetica", "bold");
                        doc.setTextColor(currentColor[0], currentColor[1], currentColor[2]);
                        doc.text(`\u2022 ${group.title}`, margin, y); 
                        y += 6; 

                        // Periodo de Experiencia (Color condicional)
                        doc.setFontSize(10);
                        doc.setFont("helvetica", "normal");
                        doc.setTextColor(periodColor[0], periodColor[1], periodColor[2]);
                        doc.text(`[Periodo: ${period}]`, margin + 5, y);
                        y += 5;
                        
                        // Progreso (Color condicional)
                        doc.setFontSize(12);
                        doc.setFont("helvetica", "bold");
                        doc.setTextColor(currentColor[0], currentColor[1], currentColor[2]);
                        doc.text(`Progreso: ${completedItems} de ${totalItems} completados`, margin + 5, y);
                        y += 8; // Espacio entre cards
                        
                        // Restore default black text color
                        doc.setTextColor(colorDefaultGray[0], colorDefaultGray[1], colorDefaultGray[2]);
                        
                        // Línea divisoria suave
                        doc.setDrawColor(230, 230, 230); // Color muy claro
                        doc.line(margin, y, (210 - margin), y); 
                        y += 5; 
                    }
                });
            });
            
            // Si no se marcó nada, añadir una nota
            if (!hasContent) {
                doc.setFontSize(12);
                doc.setFont("helvetica", "italic");
                doc.text("No se marcaron habilidades en el checklist (Punto 3).", pageCenter, y + 20, { align: 'center' });
            }


            // Guardar el PDF
            doc.save(`Autodiagnostico_PM_${name || 'report'}.pdf`);
        }
        
        // Ensure chart redraws on window resize
        window.addEventListener('resize', () => {
            drawRadarChart(assessmentData.scores);
        });
        
        // Ensure initial UI is rendered if window.onload fires too late
        window.setTimeout(() => {
            // El check se realiza en renderUI(), pero aseguramos que se llama
            renderUI();
        }, 50);
        
    </script>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

    <!-- Tailwind Config for Inter Font --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <!-- Header --><header class="bg-indigo-700 text-white p-4 shadow-lg sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-xl sm:text-3xl font-extrabold tracking-tight">Autodiagnóstico PM (Mes 1)</h1>
            
            <div class="flex items-center space-x-4 text-sm">
                <!-- Campo Nombre --><div class="flex flex-col items-start sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2">
                    <label for="name-input" class="font-semibold whitespace-rap">Nombre:</label>
                    <input 
                        type="text" 
                        id="name-input" 
                        value="" 
                        placeholder="Tu Nombre"
                        class="p-1 rounded text-black bg-white border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 w-32 sm:w-40"
                        onchange="handleNameChange(this.value);"
                        oninput="handleNameChange(this.value);"
                    />
                </div>
                <!-- ID de Usuario - Oculto al no usar Firebase --><div class="text-xs sm:text-sm opacity-80 hidden" id="user-id-display"></div>
            </div>
        </div>
    </header>

    <!-- Main Content Grid --><main class="max-w-7xl mx-auto px-4 py-8 space-y-8">
        
        <!-- SECTION 1: VISUALIZATION & SLIDERS (Grid Layout) --><section class="bg-white p-6 rounded-xl shadow-2xl border border-indigo-100">
            <h2 class="text-2xl font-bold text-indigo-800 mb-6 border-b pb-2">1. Autoevaluación de Competencias (Escala 1-5)</h2>
            <!-- CAMBIO DE LAYOUT: Gráfico 8/12, Sliders 4/12 --><div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                
                <!-- Columna 1: Gráfico (8/12) -->
                <div class="lg:col-span-8 h-fit sticky lg:top-[68px]">
                    <div class="flex justify-center items-center p-4">
                        <canvas id="radar-chart" class="w-full max-w-xl"></canvas>
                    </div>
                    <div class="mt-4">
                        <!-- MEDIA ARITMÉTICA Y ESCALA (Arriba) --><div id="average-display" class="mb-2 text-center lg:text-right">
                            <!-- Contenido de la media y escala se renderiza aquí --></div>
                        <!-- LEYENDA ESTÁTICA (Abajo y más pequeña) --><p class="text-[0.6rem] mt-4 text-center lg:text-right text-gray-600">Este gráfico muestra tu autoevaluación en una escala de **1 (mínimo)** a **5 (experto)**.</p>
                        <!-- Estado de guardado - Oculto al no usar Firebase --><div id="save-status" class="mt-2 text-sm text-green-600 font-medium text-center lg:text-right hidden"></div>
                    </div>
                </div>

                <!-- Columna 2: Sliders (Punto 1 - 4/12) -->
                <div class="lg:col-span-4 space-y-4" id="scores-container">
                    <!-- Content generated by renderUI() --></div>
            </div>
        </section>

        <!-- SECTION 2: REFLECTIONS (Full Width, Grid Layout) --><section class="bg-white p-6 rounded-xl shadow-2xl border border-indigo-100">
            <h2 class="text-2xl font-bold text-indigo-800 mb-6 border-b pb-2">2. Reflexión sobre Casos Prácticos</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="reflections-container">
                <!-- Content generated by renderUI() --></div>
            <!-- Nueva línea de instrucción al final de la sección --><div class="mt-6 col-span-full text-right">
                <p class="text-xs text-gray-500 font-medium">
                    * Si no se te viene nada a la cabeza para alguna pregunta, responde **N/A**.
                </p>
            </div>
        </section>
        
        <!-- NUEVA SECTION 3: CHECKLIST HABILIDADES VS EXPERIENCIA --><section class="bg-white p-6 rounded-xl shadow-2xl border border-indigo-100 mt-8">
            <h2 class="text-2xl font-bold text-indigo-800 mb-6 border-b pb-2">3. Checklist habilidades vs experiencia</h2>
            
            <!-- 3.1 Selector de Experiencia -->
            <div class="mb-8 p-4 bg-indigo-50 rounded-lg border border-indigo-200 shadow-inner flex flex-col md:flex-row justify-between items-center">
                <label for="experience-selector" class="text-lg font-semibold text-indigo-800 mb-2 md:mb-0">
                    Evalúa tu nivel según tu experiencia:
                </label>
                <select id="experience-selector" 
                        class="p-2 border border-indigo-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 w-full md:w-auto"
                        onchange="handleExperienceChange(this.value)">
                    <option value="0-6 meses">0-6 meses</option>
                    <option value="6-12 meses">6-12 meses</option>
                    <option value="12-18 meses">12-18 meses</option>
                    <option value="18-36 meses">18-36 meses</option>
                    <option value="Más de 36 meses">Más de 36 meses</option>
                </select>
            </div>

            <!-- 3.2 Contenedor de Checklists (Grid) -->
            <div id="checklist-container" 
                 class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 transition duration-500 ease-out opacity-0 scale-95"
                 aria-live="polite">
                <!-- Cards se renderizarán aquí -->
            </div>
        </section>
        
        <!-- Botón de Exportación a PDF (Posición final debajo de la Sección 3) -->
        <div class="px-4 pb-4 flex justify-center flex-col items-center">
            <!-- El botón es inicialmente deshabilitado por el script --><button id="export-pdf-btn" onclick="checkFormCompletion() ? exportPDF() : showSnackbar('Completa las respuestas para poder exportarlo');" class="bg-gray-400 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-pink-400 focus:ring-opacity-50" disabled>
                Exportar a PDF
            </button>
            <!-- Hint para el usuario --><p id="export-hint" class="text-xs text-gray-400 mt-2 text-center" style="display: none;">
                (Para poder exportar a PDF rellena todas las preguntas de la Parte 2)
            </p>
        </div>

    </main>
    
    <!-- Snackbar for Notifications --><div id="snackbar" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-lg shadow-xl transition-opacity duration-300 opacity-0 invisible z-50">
        Completa las respuestas para poder exportarlo
    </div>

    <!-- Footer with Scale Description --><footer class="bg-gray-200 mt-10 p-4 text-sm text-gray-700">
        <div class="max-w-7xl mx-auto px-4">
            <h3 class="font-bold mb-2 text-left">Escala de autoevaluación</h3>
            <p class="mb-1 text-left">🤓 **1 - Sin experiencia:** No tengo conocimientos ni experiencia práctica.</p>
            <p class="mb-1 text-left">**2 - Principiante:** He leído/escuchado sobre esto, pero no lo he practicado.</p>
            <p class="mb-1 text-left">**3 - Competente:** Tengo experiencia básica y puedo aplicarlo con guía.</p>
            <p class="mb-1 text-left">**4 - Avanzado:** Lo he aplicado regularmente con autonomía y buenos resultados.</p>
            <p class="text-left">💪🏻 **5 - Experto:** Puedo enseñar a otros y liderar en esta área.</p>
        </div>
    </footer>

</body>
</html>
